machine:
  python:
    version: 2.7

dependencies:
  cache_directories:
    - "/opt/spm8"
  override:
    # Add MCRInstaller.bin dependencies first
    - sudo apt-get install -y libxp6 libxpm4 libxmu6 libxt6 bc
    - source continuous_integration/setup_spm.sh
    - pip install --upgrade pip
    - pip install numpy
    - pip install scipy
    - pip install matplotlib coverage
    - pip install nose
    - pip install scikit-learn
    - pip install joblib
    - pip install nibabel
    - pip install networkx
    - pip install traits
    - pip install sympy
    - pip install nipype
    - pip install nipy
    - pip install configobj
    - pip install "nilearn>=0.1.3"
    - python setup.py install

test:
  override:
    - make clean
    - make test-code
    - python examples/nipype_preproc_spm_auditory.py

general:
  artifacts:
