machine:
  python:
    version: 2.7

dependencies:
  cache_directories:
    - "/opt/spm8"

  pre:
    # Add MCRInstaller.bin dependencies first
    - sudo apt-get install -y libxp6 libxpm4 libxmu6 libxt6 bc
    - source continuous_integration/setup_spm.sh
    - sudo apt-get install -qq python-numpy
    - sudo apt-get install -qq python-scipy
    - sudo apt-get install -qq python-nose
    - sudo apt-get install -qq python-nibabel
    - sudo apt-get install -qq python-sklearn
    - sudo apt-get install -qq python-networkx
    - sudo apt-get install -qq python-nipype
    - pip install --upgrade pip
    - pip install "nilearn>=0.1.3"
    - pip install coverage coveralls
  override:
    - python setup.py install

test:
  override:
    - make clean
    - make test-code
    - python examples/nipype_preproc_spm_auditory.py

general:
  artifacts:
